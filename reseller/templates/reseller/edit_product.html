{% extends "reseller/reseller_master.html" %} {% load static %} {% block reseller_content %}
<div class="container">
    <!-- <nav class="navbar navbar-expand-lg navbar-dark bg-light fixed-top">
            <div class="container">
              <a class="navbar-brand text-dark font-weight-bold" href="#" >Products</a>


              <div class="collapse navbar-collapse" id="navbarResponsive">

              </div>

              <button class="btn btn-dark" id="menu-toggle">Save</button>


            </div>
        </nav>
         -->
    <div class="py-5 text-left">
        <h2>Edit your product</h2>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Product Name</th>
                    <th scope="col">Vendor Name</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ product.title }}</td>
                    <td>{{ product.vendor }}</td>
                </tr>
            </tbody>
        </table>
        <!-- <input type="file"> -->
    </div>

    <div class="row">
        <div class="col-md-8 order-md-1">
            <form class="needs-validation" novalidate>
                <!-- Hideproduct id field -->
                <input type="text" name="" id="id" value="{{ product.id }}" hidden>
                <!-- End product id field -->
                <div class="mb-3">
                    <label for="descript">Change Description</label>
                    <textarea class="form-control" id="descript">{{ product.desc }}</textarea>
                    <div class="invalid-feedback">
                        Please enter a description about the product.
                    </div>
                </div>


                <div class="mb-3">
                    <!-- <label>Change product picture</label> -->
                    <!-- <div class="custom-file">
                        <label>Upload a picture</label>
                        <label class="custom-file-label">Choose file</label>
                        <input type="file" class="custom-file-input" id="image" value="{{ product.img }}">
                    </div>
                    <div class="invalid-feedback">
                        Please add atleast one picture.
                    </div> -->
                    <label class="form-label" for="customFile">Change product picture</label>
                    <input type="file" class="form-control" id="customFile" />
                </div>
                <div class="mb-3">
                    <label for="price">Change Price</label>
                    <input type="text" class="form-control" id="price" value="{{ product.price }}" required>
                    <div class="invalid-feedback">
                        Please enter price.
                    </div>
                </div>

                <div class="mb-6">
                    <label for="quantity">Update Quantity</label>
                    <input type="number" class="form-control" id="quantity" value="{{ product.quantity }}">
                </div>


                <hr class="mb-4">
                <button class="btn btn-primary btn-lg btn-block" type="button" onclick="editproduct()">Save</button>
            </form>
        </div>
    </div>
</div>
<script src="{% static 'reseller/scripts/jquery-3.5.1.min.js' %}"></script>
<script>
    function editproduct() {
        var formdata = new FormData();

        var image = $('#customFile')[0].files[0];
        description = $('#descript').val();
        price = $('#price').val();
        quantity = $('#quantity').val();
        id = $('#id').val();

        formdata.append('id', id);
        formdata.append('image', image);
        formdata.append('description', description);
        formdata.append('price', price);
        formdata.append('quantity', quantity);

        console.log("heyy", image.name)
        $.ajax({
            url: 'editProducts',
            type: 'POST',
            processData: false,
            contentType: false,
            data: formdata,
            success: function(response) {
                alert(response.message)
                window.location.href = "home";
            }
        })
    }
</script>
{% endblock %}